# path: ops/S3.md
# S3 (Static Hosting for Frontend)

## 버킷
- 정적 산출물 버킷: `artery-frontend-artifacts` (예시 이름)
- 로그 버킷: `artery-cf-logs` (선택)

## 설정
- 버전닝: ON
- 퍼블릭 액세스: 전부 차단
- 소유권: Bucket owner enforced
- 액세스: CloudFront OAC(Origin Access Control) 로만 접근 허용

## 경로 규칙
- 버전 경로: `app/<git-sha>/...`
- 현재 버전 별칭: `app/latest/` (스위치 전용)
- 정적 자산 파일명: 콘텐츠 해시 포함 (예: `app.<hash>.js`)

## 수명주기(권장)
- 오래된 `app/<git-sha>/...` 경로: 90~180일 뒤 이전
- 로그 버킷: 180~365일 뒤 이전/삭제

## 산출물(릴리즈 시 기록)
- 업로드된 경로: `app/<git-sha>/`
- 스위치 여부: `latest` → `<git-sha>`
- 롤백 대상: 직전 `<git-sha>`
